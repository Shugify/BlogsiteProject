<!DOCTYPE html>
<html lang="en">
<head>
	{% load static %}
<meta charset="utf-8"/>
<link rel="apple-touch-icon" sizes="76x76" href="{% static 'app01/image/favicon.ico' %}"/>
<link rel="icon" type="image/png" href="{% static 'app01/image/favicon.ico' %}">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>BlogSphere博界</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700|Source+Sans+Pro:400,600,700" rel="stylesheet">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<!-- Main CSS -->
<link href="{% static 'app01/css/main.css' %}" rel="stylesheet"/>
	<style>
		.nav-item.active .nav-link {
            color: black !important; /* 修改文本颜色 */
            font-weight: bold;
            /* background-color: #3D91C9;*/
        }
	</style>


</head>
<body>
<!--------------------------------------
NAVBARMundana is an HTML Bootstrap Template for Professional Blogging
--------------------------------------->
<link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
>

<nav class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
<div class="container">


	<div class="navbar-collapse collapse" id="navbarColor02" style="">

		<ul class="navbar-nav mr-auto d-flex align-items-center">

			 <li class="nav-item  active">
                    <a class="nav-link active" href="http://127.0.0.1:8000/ad_home/">账户管理</a>
                </li>
                <li class="nav-item pl-3">
                    <a class="nav-link" href="http://127.0.0.1:8000/ad_manage_article/">文章管理</a>
                </li>

                <li class="nav-item pl-3">
                    <a class="nav-link " href="http://127.0.0.1:8000/ad_manage_comment/">评论管理</a>
                </li>

                <li class="nav-item pl-3">
                    <a class="nav-link" href="http://127.0.0.1:8000/ad_self_article/">我的blog</a>
                </li>

                <li class="nav-item pl-3">
                    <a class="nav-link " href="http://127.0.0.1:8000/ad_add_category/">分类管理</a>
                </li>




		</ul>





		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item highlight">
				<a class="nav-link" href="http://127.0.0.1:8000/ad_send_article/">发布博客</a>
			</li>
		</ul>



		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item highlight">
			<a class="nav-link" href="http://127.0.0.1:8000/ad_account_setting/">个人中心</a>
			</li>
		</ul>
	</div>
</div>
</nav>
<!-- End Navbar -->

<!----------------
MAIN
------------------>
    
<div class="container pt-4 pb-4 mt-1 ">

		<div class="col-md-12" style="display: flex; justify-content: flex-end;">
			 	 <form class="form-inline ">
        			<input class="form-control form-control-sm mr-sm-2 rounded" type="search" placeholder="搜索特定账户" aria-label="Search" id="navSearchInput" name="search">

        			<button class="btn btn-outline-success btn-sm my-2 my-sm-0" type="submit">搜索</button>

    			</form>
		</div>

	<h2 class="pb-4 font-weight-bold spanborder"></h2>

<!--列举个人账号-->
<div class="col-md-12" style="display: flex; justify-content: center;">
	<div class="row col-md-10 justify-content-center">
        {% for user in users %}
            <div class="col-12 mt-2 mb-2 d-flex justify-content-center" style="height:80px;">
                <!-- 头像 -->
                <div class="ml-1 col-2">
                    {% if user.user_pfp %}
                        <img alt="用户头像" class="rounded-circle" height="80"
                         src="{{ user.user_pfp.url }}?timestamp={{ timestamp }}" width="80">
                    {% endif %}
                </div>
                <!--name-->
                <div class="col-8 font-weight-bold ml-3 mt-3" style="font-size: 27px;">
                    <a href="{% url 'user_detail_lastest' user.user_id flag %}">{{user.user_name}} (ID:{{ user.user_id }})</a>
                    <div class="font-weight-light" style="font-size: small">
                       个人简介：  {{ user.user_introduction }}
                    </div>
                </div>
				<div class="col-2 ">
					{% if user.user_state == 0 %}
                    <a href="{% url 'ad_delete_user' user.user_id %}" onclick="return confirm_delete()">
                        <button class="btn btn-primary btn-sm mt-3">删除</button>
                    </a>
                	{% endif %}
				</div>
            </div>
            <hr>
            <hr>
        {% endfor %}
        <!-- 分页功能 页码导航 -->
			<div align="center" style="position:relative;top:10px">
				<div class="pagination row">
					<div class="m-auto">
						<span class="step-links">
							<!-- 如果不是第一页，则显示上翻按钮 -->
							{% if users.has_previous %}
								<a href="?page=1" class="ml-auto btn btn-outline-success btn-sm my-2 my-sm-2">
									&laquo; 1
								</a>
								<span>...</span>
								<a href="?page={{ users.previous_page_number }}"
								   class="ml-auto btn btn-outline-success btn-sm my-2 my-sm-2"
								>
									{{ users.previous_page_number }}
								</a>
							{% endif %}

							<!-- 当前页面 -->
							<span class="ml-auto btn btn-success btn-sm my-2 my-sm-2">
								{{ users.number }}
							</span>

							<!-- 如果不是最末页，则显示下翻按钮 -->
							{% if users.has_next %}
							<a href="?page={{ users.next_page_number }}"
								class="ml-auto btn btn-outline-success btn-sm my-2 my-sm-2"
							>
							{{ users.next_page_number }}
							</a>
							<span>...</span>
							<a href="?page={{ users.paginator.num_pages }}"
							   class="ml-auto btn btn-outline-success btn-sm my-2 my-sm-2"
							>
							{{ users.paginator.num_pages }} &raquo;
							</a>
							{% endif %}
						</span>
					</div>
				</div>
			</div>
			<!-- 分页功能 页码导航 -->
    </div>
</div>
</div>



<!--------------------------------------
FOOTER
--------------------------------------->
<div class="container mt-1">
	<footer class="bg-white border-top p-3 text-muted small">
	<div class="row align-items-center justify-content-between">
		<div>
            <span class="navbar-brand mr-2"><strong>五元一次方程组</strong></span> 倾情制作
			<script>document.write(new Date().getFullYear())</script>
			 . Open most copyright.
		</div>
		<div>
			点击 <a target="_blank" class="text-secondary font-weight-bold" href="https://github.com/Shugify/BlogsiteProject/">这里</a> 查看项目源码.
		</div>
	</div>
	</footer>
</div>
<!-- End Footer -->

<!--实现删除时的弹窗功能;a标签的onclick和href的执行顺序是：先onclick再href-->
<script>
// 删除文章的函数
function confirm_delete() {
	const ans = confirm("确认要删除？");
	if (ans===false) {
		event.preventDefault(); //取消默认应答，直接跳过a标签内的href操作
		return false;
	}else{
		alert("删除成功")
		return true
	}
}
</script>

<!--------------------------------------
JAVASCRIPTS
--------------------------------------->
<script src="{% static 'app01/js/vendor/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/vendor/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/vendor/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/functions.js' %}" type="text/javascript"></script>
</body>
</html>