<!DOCTYPE html>
<html lang="en">
<head>
	{% load static %}
<meta charset="utf-8"/>
<link rel="apple-touch-icon" sizes="76x76" href="{% static 'app01/image/favicon.ico' %}"/>
<link rel="icon" type="image/png" href="{% static 'app01/image/favicon.ico' %}">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>BlogSphere博界</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700|Source+Sans+Pro:400,600,700" rel="stylesheet">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<!-- Main CSS -->
<link href="{% static 'app01/css/main.css' %}" rel="stylesheet"/>
</head>
<body>
<!--------------------------------------
NAVBARMundana is an HTML Bootstrap Template for Professional Blogging
--------------------------------------->
<link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
>

<nav class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
<div class="container">
	<a class="navbar-brand" href="http://127.0.0.1:8000/home/"><strong>主页面</strong></a>
	<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
	</button>
	<div class="navbar-collapse collapse" id="navbarColor02" style="">

		<ul class="navbar-nav mr-auto d-flex align-items-center">

			<li class="nav-item">
			<a class="nav-link" href="http://127.0.0.1:8000/my_article/">我的blog</a>
			</li>
			<li class="nav-item">
			<a class="nav-link" href="http://127.0.0.1:8000/category/">分类</a>
			</li>

		</ul>






		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item highlight">
				<a class="nav-link" href="http://127.0.0.1:8000/send_article/">发布博客</a>
			</li>
		</ul>



		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item highlight">
			<a class="nav-link" href="http://127.0.0.1:8000/account_setting/">个人中心</a>
			</li>
		</ul>
	</div>
</div>
</nav>
<!-- End Navbar -->

    <div class="container">
    <!-- 修改，面包屑的href增加input参数 -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'search_results' %}?search={{ search }}">
                    最新
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="{% url 'search_results' %}?order=article_views&search={{ search }}">
                    最热
                </a>
            </li>
        </ol>
    </nav>

    <!-- 新增，搜索栏 -->
    <div class="row">
        <div class="col-auto mr-auto">
            <form class="form-inline" >
                <label class="sr-only">content</label>
                <input type="text"
                    class="form-control mb-2 mr-sm-2"
                    name="search"
                    placeholder="搜索文章..."
                    required
                >
            </form>
        </div>
    </div>

    <!-- 新增，搜索提示语 -->
    {% if search %}
        {% if articles %}
            <h4><span style="color: red">"{{ search }}"</span>的搜索结果如下：</h4>
            <hr>
             <!-- 列表循环 -->
    	<div class="row mt-2">
        {% for article in articles %}
            <div class="pr-3">
						<!-- 标题 -->
						<h2 class="h4 font-weight-bold">
							<a class="text-dark" href="{% url 'article' article.article_id %}">{{article.article_title}}</a>
						</h2>
						<!-- 标题 -->

                		<!-- 标签 -->
						<span>
    					{% for tag in article.tags.all %}
        					<a href="#" class="badge badge-secondary">{{ tag }}</a>
    					{% endfor %}
						</span>
						<!-- 标签 -->

						<br>

                		<div class="card-text text-muted small">
                        {% if article.article_author %}
                            <p class="text-muted">作者: {{ article.article_author.user_name }}</p>
                        {% else %}
                            作者: {{ article.article_adAuthor.administrator_name }} <p class="fas fa-star" style="color: #8B0000" ></p>
                        {% endif %}
                    </div>

						<!-- 内容摘要 -->
						<span class="text-clip">
							{{ article.article_content|slice:'100' }}...
						</span>
						<!-- 内容摘要 -->

						<br>



						<!-- 创建时间，发布时间，浏览量，评论数 -->
						<span>
                        	<i class="fas fa-clock" style="color: pink;"></i>
                        	{{ article.article_created|date:'Y-m-d H:i:s' }}
                    	</span>
						<span>
                        	<i class="fas fa-eye" style="color: lightskyblue;"></i>
                        	{{ article.article_views }}&nbsp;&nbsp;&nbsp;
                    	</span>
						<span>
                        	<i class="fas fa-comments" style="color: yellowgreen;"></i>
                        	{{ article.article_commentcnt }}&nbsp;&nbsp;&nbsp;
                    	</span>
						<!-- 创建时间，发布时间，浏览量，评论数 -->
			</div>
            <hr style="width: 100%;"/>
        {% endfor %}

        {% else %}
            <h4>暂无<span style="color: red">"{{ search }}"</span>有关的文章。</h4>
            <hr>
        {% endif %}
    {% endif %}








<!--------------------------------------
JAVASCRIPTS
--------------------------------------->
<script src="{% static 'app01/js/vendor/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/vendor/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/vendor/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'app01/js/functions.js' %}" type="text/javascript"></script>
</body>
</html>
